<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.10 (454269)"/><meta name="author" content="lcx3114@163.com"/><meta name="created" content="2016-01-20 12:22:15 +0000"/><meta name="updated" content="2016-01-20 12:42:13 +0000"/><title>第十七章：了解应用的动态</title></head><body><div><b>了解正在运行的操作</b></div><div>db.currentOp() &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;查看正在进行的操作 </div><div>db.killOp(123) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;终止操作 </div><div><br/></div><div><br/></div><div><b>使用系统分析器</b></div><div>db.setProfilingLevel(2) &nbsp;&nbsp;&nbsp;&nbsp;启动2级（记录所有内容）系统分析器，默认关闭因消耗性能 </div><div>系统分析器内容保存在db.system.profile集合中</div><div>db.setProfilingLevel(1, 500) &nbsp;&nbsp;&nbsp;&nbsp; 只记录操作时间在500ms以上的操作，不能太小，操作时间在分析器关闭时也影响日志记录 </div><div>db.setProfilingLevel(0) &nbsp;&nbsp;&nbsp;&nbsp; 关闭系统分析器 </div><div><br/></div><div><br/></div><div><b>计算空间消耗</b></div><div>db.boards.stats() &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;显示集合信息 </div><div>db.stats() &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 显示数据库信息 </div><div><br/></div><div>mongotop工具，查看哪个集合最繁忙，查看每个数据库的锁状态</div><div>mongostat提供有关服务器信息</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></body></html>