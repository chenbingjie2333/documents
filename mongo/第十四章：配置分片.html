<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.10 (454269)"/><meta name="author" content="lcx3114@163.com"/><meta name="created" content="2016-01-18 12:49:23 +0000"/><meta name="updated" content="2016-01-18 13:26:54 +0000"/><title>第十四章：配置分片</title></head><body><div><b>多服务器建立集群</b></div><div>mongod --configsvr --dbpath /var/lib/mongodb -f /var/lib/config/mongod.conf &nbsp;&nbsp;&nbsp;&nbsp; 启动配置服务器，端口默认27019，数据文件目录默认/data/configdb </div><div>mongos --configdb config-1:27019,config-2:27019 -f /var/lib/mongos.conf &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 启动集群路由mongos，指定配置服务器，端口默认27017，自身不保存数据；不能频繁重启，影响拆分阀值 </div><div>sh.addShard("spock/servce-1:27017,servce-2:27017") &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 将副本集作为一个分片添加到集群 </div><div>sh.addShard("some-server:27017") &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 将单服务器添加到集群，不推荐 </div><div><br/></div><div>块信息保存在config.chunks集合中</div><div><br/></div><div><br/></div><div><b>均衡器</b></div><div>均衡器复制块的迁移</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></body></html>